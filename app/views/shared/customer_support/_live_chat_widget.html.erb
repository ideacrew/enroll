<script src="https://apps.usw2.pure.cloud/widgets/9.0/cxbus.min.js" onload="javascript:CXBus.configure({debug:false,pluginsPath:'https://apps.usw2.pure.cloud/widgets/9.0/plugins/'}); CXBus.loadPlugin('widgets-core');"></script>

<script>
  window._genesys = {
    "widgets": {
  
      "webchat": {
        "transport": {
          "type": "purecloud-v2-sockets",
          "dataURL": "https://api.usw2.pure.cloud",
          "deploymentKey": "60b16add-5e86-4be1-86b4-c1e870cef2ed",
          "orgGuid": "72ccb33f-2747-4e02-aa7e-4030bdc11f13",
          "interactionData": {
            "routing": {
              "targetType": "QUEUE",
              "targetAddress": "",
              "priority": 2
            }
          }
        },
        "userData": {
          "addressStreet": "",
          "addressCity": "",
          "addressPostalCode": "",
          "addressState": "",
          "phoneNumber": "",
          "customField1Label": "",
          "customField1": "",
          "customField2Label": "",
          "customField2": "",
          "customField3Label": "",
          "customField3": ""
        }
      }
    }
  };

  function getAdvancedConfig() {
    return {
      "form": {
        "autoSubmit": false,
        "firstname": "",
        "lastname": "",
        "email": "",
        "subject": ""
      },
      "formJSON": {
        "wrapper": "<table></table>",
        "inputs": [
          {
            "id": "cx_webchat_form_firstname",
            "name": "firstname",
            "maxlength": "100",
            "placeholder": "Required",
            "label": "First Name",
      validateWhileTyping: false, // default is false
          validate: function(event, form, input, label, $, CXBus, Common) {
          if(input) {
            if (input.val())
            return true;
            else
            return false;
          }
          return false;}
      
          },
          {
            "id": "cx_webchat_form_lastname",
            "name": "lastname",
            "maxlength": "100",
            "placeholder": "Required",
            "label": "Last Name",
      validateWhileTyping: false, // default is false
          validate: function(event, form, input, label, $, CXBus, Common) {
          if(input) {
            if (input.val())
            return true;
            else
            return false;
          }
          return false;}
          },
          {
            "id": "cx_webchat_form_email",
            "name": "email",
            "maxlength": "100",
            "placeholder": "Optional",
            "label": "Email"
          },
       {
            "id": "cx_webchat_form_phoneNumber",
            "name": "phonenumber",
            "maxlength": "100",
            "placeholder": "Optional",
            "label": "Phone Number"
          },
          {
            id: "cx_webchat_form_customselect",
            name: "customselect",
            placeholder: "Required",
            label: "Topic",
            type: "select",
      required: "Please select an option",
            options: [
                {
                    text: "Required",
                    hidden: "hidden",
          value: "na"
            },
                {
                    text: "Manage my CoverME.gov Account",
                    value: "A",
          
                },
                {
                    text: "Open Enrollment & Eligibility",
                    value: "B"
                },
        {
                    text: "Documentation Questions",
                    value: "C"
                },
        {
                    text: "Special Enrollment Period (SEP)",
                    value: "D"
                }
            ],
      
        validate: function(event, form, input, label, $, CXBus, Common) {
        
          if(input != undefined){
          
            if (document.getElementById("cx_webchat_form_customselect").value!="na")
            return true;
            else
            return false;
          }
          return false;},
            wrapper: "<tr><th>{label}</th><td>{input}</td></tr>" /* input row wrapper */
        },
        ]
      }
    };
  }

  const customPlugin = CXBus.registerPlugin('Custom');
</script>

<style>
  /* Primary Background */
  .cx-widget.cx-theme-dark {
    background-color: #2f5063;
  }  

  /* Fields Background (Form Input) */
  .cx-widget.cx-theme-dark .cx-form-control {
    background-color: #4b7ca4;
    color: #fdfdfd;
  }

  /* Start Button */
  .cx-widget.cx-theme-dark .cx-btn-primary {
    border-color: #8ba472 !important;
    background: #8ba472;
  }

  /* Cancel Button */
  .cx-widget.cx-theme-dark .cx-btn-default {
    border-color: #4b7ca4!important;
    background-color: #4b7ca4;
  }
</style>


<button type="button" id="chat-button" onclick="customPlugin.command('WebChat.open', getAdvancedConfig());"><%= l10n("start_chat") %></button>