<% if @result.success? %>
  document.querySelector('.child-row').remove();
<% end %>

// Remove existing flash messages
document.querySelectorAll('.flash.module').forEach(function(node) { node.remove() })

// add new ones
var div = document.createElement('div');
div.innerHTML = "<%= escape_javascript(render_flash) %>".trim();

<% if @result.success? %>
  // top of the table if success
  document.querySelector('body .content').before(div);
<% else %>
  // top of the form if error
  document.querySelector('.child-row h3').before(div);
<% end %>