<%= form_for @applicant, url: application_applicant_path(@application, @applicant), method: :patch do |f|%>
  <div class="row no-buffer">
    <div id="personal_info" class="module">
      <div class="col-md-12 no-pd col-sm-12 col-xs-12">
        <div class="row row-form-wrapper no-buffer">
          <div class="col-md-3 col-sm-3 col-xs-12 form-group form-group-lg no-pd">
            <%=f.text_field :first_name, id: "first-name", class: "floatlabel form-control", placeholder: "FIRST NAME", autocomplete: :off %>
          </div>
          <div class="col-md-3 col-sm-3 col-xs-12 form-group form-group-lg no-pd">
            <%=f.text_field :middle_name, class: "floatlabel form-control", placeholder: "MIDDLE NAME", autocomplete: :off %>
          </div>
          <div class="col-md-3 col-sm-3 col-xs-12 form-group form-group-lg no-pd">
            <%=f.text_field :last_name, class: "floatlabel form-control", placeholder: "LAST NAME", autocomplete: :off %>
          </div>
          <div class="col-lg-3 col-md-3 col-sm-3 col-xs-12 form-group form-group-lg no-pd">
              <%= f.select :name_sfx, [ 'Jr.', 'Sr.', 'II', 'III', 'IV', 'V' ], :include_blank => 'NONE', class: "floatlabel form-control", autocomplete: :off %>
          </div>
        </div>

        <div class="row row-form-wrapper no-buffer">
          <div class="col-lg-5 col-md-2 col-sm-2 col-xs-5 form-group form-group-lg no-pd top-buffer" >
            <span>Does <%= @applicant.first_name %> need coverage? *</span>
          </div>
          <%= render 'financial_assistance/shared/is_applying_for_coverage', f: f, first_checked: @applicant.is_applying_coverage, second_checked: !@applicant.is_applying_coverage %>
        </div>

        <div class="row row-form-wrapper no-buffer">
          <div class="col-md-3 col-sm-3 col-xs-12 no-pd">
            <div class="form-group form-group-lg">
              <%= datepicker_control f, :dob, {:class => "floatlabel form-control", :placeholder => "#{l10n("date_of_birth").to_s.upcase} *",
                                               :'data-date-min' => "-110y", :'data-date-max' => "+0", required: true,  id: "family_member_dob_#{@applicant.id}"}, @applicant.dob %>
            </div>
          </div>
         <div class="col-md-3 col-sm-3 no-pd">
           <div class="form-group form-group-lg">
             <%= f.text_field :ssn, class: "home required floatlabel form-control mask-ssn", placeholder: "#{l10n("social_security").to_s.upcase}" %>
           </div>
         </div>

          <div class="col-md-3 col-sm-3 no-pd">
             <div class="col-xs-12">
               <div class="">
                 <div class="form-group form-group-lg top-buffer">
                   <%= f.check_box :no_ssn %>
                   <%= f.label :no_ssn, :value => true do %>
                   <span class='no_ssn twelve'>&nbsp;<%= l10n("do_not_have_ssn") %></span>
                   <% end %>
                   <!-- <span><i class='fa fa-question-circle'></i></span> -->
                 </div>
               </div>
             </div>

             <div class="col-xs-2">
             </div>
          </div>

          <div class="col-md-3 col-sm-3 no-pd">
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 form-group form-group-lg no-pd">
              <div class="radio">
                <%= f.radio_button :gender, "male", class: "required floatlabel", id: 'radio_male' %>
                <label for="radio_male"><span><%= l10n("male").to_s.upcase %></span></label>
              </div>
            </div>
            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 form-group form-group-lg no-pd">
              <div class="radio">
                <%= f.radio_button :gender, "female", class: "required floatlabel", id: 'radio_female'  %>
                <label for="radio_female"><span><%= l10n("female").to_s.upcase %></span></label>
              </div>
            </div>
          </div>
        </div>
        <% unless @applicant.is_primary_applicant? %>
          <div class="row row-form-wrapper no-buffer">
            <div class="col-lg-3 col-md-3 col-sm-3 col-xs-3 form-group form-group-lg mt18">
              <label class="static_label label-floatlabel mt-label">NAME</label>
              <label id="is_applying_coverage_value_dep_1" class= "ml-label">
                <%= @applicant.first_name.present? ? @applicant.first_name : 'this person' %>
              </label>
            </div>
            <div class="col-md-5 mt18">
              <div class="select-positioning ml-label"> <label>is</label> </div>
              <label class="static_label label-floatlabel mt-label">RELATIONSHIP</label>
              <div class="select-relation rs_selection">
                <%= f.select :relationship, faa_relationship_options(f.object, request.referer), :class => "floatlabel form-control", :prompt => 'choose' %>
              </div>
              <label class="position-left">&nbsp;&nbsp;of</label>
              <div class="icon-rel">
                <i class="fa fa-user icn-out fa-2x" aria-hidden="true"></i>
                <i class="fa fa-link" aria-hidden="true"></i>
                <i class="fa fa-user icn-out fa-lg" aria-hidden="true"></i>
              </div>
            </div>
            <div class="col-lg-4 mt18 static-font">
              <label class="static_label label-floatlabel mt-label">ACCOUNT HOLDER</label>
              <span class="position-full-name"> <%= @applicant.full_name %> </span>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <br />
  <div id="consumer_fields_sets">
    <%= render 'financial_assistance/shared/consumer_fields', f: f %><br>
  </div>
    <%= render 'financial_assistance/shared/consumer_home_address_fields', f: f %><br>
  <% if f.object.is_primary_applicant %>
    <%=
      unless f.object.phones.nil?
        ["home","mobile","work","fax"].each do |kind|
           f.object.phones.build(kind: kind) if f.object.phones.select{|phone| phone.kind == kind}.blank?
        end
      end

      render 'financial_assistance/shared/phone_fields', f: f
    %><br>

    <% unless f.object.emails.nil?
         ["home","work"].each do |kind|
           f.object.emails.build(kind: kind) if f.object.emails.select{|email| email.kind == kind}.blank?
         end
       end
    %>

    <%= f.fields_for :emails, errors: {}, fieldset: true do |email|  %>
      <div id="email_info" class="row row-form-wrapper no-buffer">
      <%= render 'financial_assistance/shared/email_fields', f: email %>
        </div><br>

    <% end %>
  <% end %>
    <div>
      <div class="no-buffer no-border-top">
        <div class="form-group form-group-lg">
          <% if aca_security_questions %>
            <p class="sixteen"><a class="change-password-link" id='change_password_link' href="#passwordChangeModal" data-toggle="modal" data-target="#passwordChangeModal">Change my password</a></p>
            <p class="sixteen"><a class="update-security-responses-link" id='update_security_responses_link' href="#securityQuestionModal" data-toggle="modal" data-target="#securityQuestionModal">Update my security challenge responses</a>
            </p>
          <% end %>
        </div>
      </div>
    </div>
    <%if @tab.nil?%>
      <%= hidden_field_tag :page, "from_registration"%>
    <% end %>

  <div class="row no-buffer <%= pundit_class Family, :updateable? %> ">
    <button type="submit" class="btn btn-primary btn-br hidden"><i class="fa fa-user-plus"></i> Save</button>
    <button type="button" class="btn btn-default close_member_form hide cancel_<%=@applicant.id%>_edit"> Cancel</button>
    <span class='btn btn-primary btn-br save_member' onclick='PersonValidations.manageRequiredValidations($(this));'> Confirm member</span>
  </div>
<% end %>
<br>
<%= render 'devise/passwords/edit' %>
<%= render 'users/security_question_responses/edit_modal', action: 'replace', method: 'POST', edit_mode: true %>
<script>
  Freebies.floatlabels();
</script>
