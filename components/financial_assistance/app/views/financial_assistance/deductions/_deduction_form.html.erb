<%= deduction_form_for @application, @applicant, deduction do |f| %>
  <% deduction_id = deduction.id %>
  <% if FinancialAssistanceRegistry.feature_enabled?(:job_income_warning_message) && local_assigns[:new_form] %>
    <% if deduction.id.blank? %>
      <% deduction_id = BSON::ObjectId.new.to_s %>
    <% end %>
    <%= render partial: 'financial_assistance/shared/temporary_warning_message', locals: { form_object_id: deduction_id, translation_key: "faa.income_temporary_message", translation_interpolation_keys: {current_year: TimeKeeper.date_of_record.year.to_s, next_year: (TimeKeeper.date_of_record + 1.year).year.to_s} } %>
  <% end %>
  <div class="focus_effect_module">
    <div class="row row-form-wrapper no-buffer row-height row-edit-border">
      <%= f.hidden_field :deduction_type, value: kind %>
      <div class="col-md-3">
        <%= f.label :frequency_kind, 'Amount *', class: "amount label-color" %>
        <div class="faa-amount">
          <%= f.text_field :amount, placeholder: '0.00', value: number_to_currency(deduction.amount), required: true %>
        </div>
      </div>
      <div class="col-md-3 fa-select select-box">
        <%= f.label :frequency_kind, 'How Often *', class: "label-color" %>
        <div class="fa-frequency-kind">
          <%= f.select(:frequency_kind, options_for_select(frequency_kind_options, selected: deduction.frequency_kind), {include_blank: "Choose"}, {:required => true}) %>
        </div>
      </div>
      <div class="col-md-3">
        <%= f.text_field :start_on, placeholder: 'FROM *', required: true, id: "start_on_#{deduction_id}", class: "datepicker-js floatlabel" %>
      </div>
      <div class="col-md-3">
        <%= f.text_field :end_on, placeholder: 'TO', id: "end_on_#{deduction_id}", class: "datepicker-js floatlabel" %>
      </div>
    </div>
    <div class="row">
      <div class="col-md-3 pull-right">
        <a class="btn btn-default deduction-cancel">Cancel</a>
        <% if FinancialAssistanceRegistry.feature_enabled?(:job_income_warning_message) %>
         <% onclick_save_event = raw "showTemporaryMessageDiv('#{deduction_id}', 'income')" %>
        <% else %>
          <% onclick_save_event = "" %>
        <% end %>
        <%= f.submit 'Save', class: 'btn btn-danger', onclick: onclick_save_event %>
      </div>
    </div>
  </div>
<% end %>
